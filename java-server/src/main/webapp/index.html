<!DOCTYPE html>
<html>

<head>

    <link rel="stylesheet" href="base.css" media="screen" />
    <link rel="stylesheet" href="desert.css" media="screen" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
    <script>
        $(document).ready(function () {
            $.get("c.txt", function (file) {

                var output = "#pretty-pre";
                var mistakes = 0;
                var splitFile = file.toLowerCase().replace(/\n/g, ' ').replace(/\s+/g, ' ').split("");
                var currentFile;
                var index = 0;

                function renderOutput() {
                    currentFile = "";
                    for (let i = index; i < splitFile.length; i++) {
                        const element = splitFile[i];
                        currentFile += element;
                    }
                    $(output).html(PR.prettyPrintOne(currentFile,"c"));
                    // $(output).text(currentFile);
                }

                renderOutput();

                $(document).keydown(function (e) {
                    if (e.key === splitFile[index]) {
                        index++;
                        renderOutput();
                    } else {
                        mistakes++;
                        // $("#status-div").text("\"" + e.key + "\" != \"" + splitFile[index] + "\" mistakes: " + mistakes);
                    }
                });

            });

        });
    </script>
</head>

<body>

    <code id=pretty-pre class="prettyprint lang-c"></a></code>
    <div id=status-div></div>
</pre>

</body>

</html>